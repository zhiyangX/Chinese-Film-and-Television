(this["webpackJsonpfood-order"]=this["webpackJsonpfood-order"]||[]).push([[0],[,,,,function(e,t,n){e.exports={"cart-items":"Cart_cart-items__1D9o8",total:"Cart_total__25DHB",actions:"Cart_actions__2_PFh","button--alt":"Cart_button--alt__uhZKM",button:"Cart_button__3KXfO"}},function(e,t,n){e.exports={form:"Checkout_form__12EP8",control:"Checkout_control__1XOm6",actions:"Checkout_actions__3puJh",submit:"Checkout_submit__1a5sh",invalid:"Checkout_invalid__3MxRH"}},,,,function(e,t,n){e.exports={button:"HeaderCartButton_button__1_Kxk",icon:"HeaderCartButton_icon__12UOL",badge:"HeaderCartButton_badge__1iOMQ",bump:"HeaderCartButton_bump__1BLGg"}},function(e,t,n){e.exports={meal:"DramaItem_meal__3Z6bo",description:"DramaItem_description__1C8Hn",price:"DramaItem_price__2SZky",button:"DramaItem_button__3UYwf"}},function(e,t,n){e.exports={"cart-item":"CartItem_cart-item__2NPWb",summary:"CartItem_summary__1DbIf",price:"CartItem_price__1S6Du",amount:"CartItem_amount__2wab7",actions:"CartItem_actions__2uBy7"}},,function(e,t,n){e.exports={meals:"AvailableDramas_meals__1CDQ3","meals-appear":"AvailableDramas_meals-appear__2mCiB",MealsLoading:"AvailableDramas_MealsLoading__17r-n",MealsError:"AvailableDramas_MealsError__TBh2h"}},function(e,t,n){e.exports={backdrop:"Modal_backdrop__3Cj8I",modal:"Modal_modal__3W37x","slide-down":"Modal_slide-down__20sAI"}},,,function(e,t,n){e.exports={header:"Header_header__24D5s","main-image":"Header_main-image__3hOqT"}},,function(e,t,n){e.exports={summary:"DramasSummary_summary__3wOBY"}},function(e,t,n){e.exports={card:"Card_card__191NQ","cart-items":"Card_cart-items__GSrcP",total:"Card_total__c5L1t",actions:"Card_actions__1_5nf","button--alt":"Card_button--alt__2FlLL",button:"Card_button__mgOPn"}},,,,,,,,,,,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(6),c=n.n(a),r=n(2),i=n(7),s=Object(i.b)({name:"ui",initialState:{cartIsShown:!1},reducers:{setCartIsShown:function(e,t){e.cartIsShown=t.payload}}}),o=s,l=s.actions,u=Object(i.b)({name:"cart",initialState:{items:[],totalAmount:0},reducers:{addItemToCart:function(e,t){var n=t.payload;e.items.find((function(e){return e.id===n.id}))||(e.items.push({id:n.id,price:n.price,title:n.title}),e.totalAmount=e.totalAmount+ +n.price)},removeItemFromCart:function(e,t){var n=t.payload,a=e.items.find((function(e){return e.id===n}));e.totalAmount=e.totalAmount-a.price,e.items=e.items.filter((function(e){return e.id!==n}))},clearCart:function(e){({items:[],totalAmount:0})}}}),d=u,j=u.actions,b=Object(i.a)({reducer:{ui:o.reducer,cart:d.reducer}}),m=(n(31),n(1)),h=n(3),O=n(9),_=n.n(O),f=n(0),p=function(){return Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(f.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},x=function(){var e=Object(m.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(r.b)(),i=Object(r.c)((function(e){return e.cart.items})),s=i.length,o="".concat(_.a.button," ").concat(n?_.a.bump:"");return Object(m.useEffect)((function(){if(0!==i.length){a(!0);var e=setTimeout((function(){a(!1)}),300);return function(){clearTimeout(e)}}}),[i]),Object(f.jsxs)("button",{className:o,onClick:function(){c(l.setCartIsShown(!0))},children:[Object(f.jsx)("span",{className:_.a.icon,children:Object(f.jsx)(p,{})}),Object(f.jsx)("span",{children:"Torrent Cart"}),Object(f.jsx)("span",{className:_.a.badge,children:s})]})},v=n.p+"static/media/Poster.53ebdcfa.jpg",C=n(17),g=n.n(C),N=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("header",{className:g.a.header,children:[Object(f.jsx)("h1",{children:"Chinese Film and Television"}),Object(f.jsx)(x,{})]}),Object(f.jsx)("div",{className:g.a["main-image"],children:Object(f.jsx)("img",{src:v,alt:"Chinese show poster"})})]})},w=n(19),I=n.n(w),S=function(){return Object(f.jsxs)("section",{className:I.a.summary,children:[Object(f.jsx)("h2",{children:"A site for chinese film and television"}),Object(f.jsx)("p",{children:"I found that lots of chinese learner struggling with seeking for chinese learning materials. So I create this website of chinese film and television show, for people outside China to learn chinese or just enjoy it!"}),Object(f.jsx)("p",{children:"Open the .torrent file downloaded with utorrent, please keep the file so that other people can download faster"})]})},k=n(8),y=n.n(k),A=n(12),D=n(13),M=n.n(D),F=n(20),H=n.n(F),B=function(e){return Object(f.jsx)("div",{className:H.a.card,children:e.children})},P=n(10),E=n.n(P),T=function(e){var t=Object(r.b)();return Object(f.jsxs)("li",{className:E.a.meal,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:e.title}),Object(f.jsx)("div",{className:E.a.description,children:e.description}),Object(f.jsx)("div",{className:E.a.price,children:e.price})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{className:E.a.button,onClick:function(){t(j.addItemToCart({id:e.id,title:e.title,price:e.price}))},children:"+"})})]})},L=function(){var e=Object(m.useState)([]),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(m.useState)(!0),r=Object(h.a)(c,2),i=r[0],s=r[1],o=Object(m.useState)(null),l=Object(h.a)(o,2),u=l[0],d=l[1];if(Object(m.useEffect)((function(){(function(){var e=Object(A.a)(y.a.mark((function e(){var t,n,c,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://chinesedrama-cae77-default-rtdb.asia-southeast1.firebasedatabase.app/dramas.json");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Something went wrong");case 5:return e.next=7,t.json();case 7:for(r in n=e.sent,c=[],n)c.push({id:r,title:n[r].title,description:n[r].description,price:n[r].price.toFixed(2)});a(c),s(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().catch((function(e){s(!1),d(e.message)}))}),[]),i)return Object(f.jsx)("section",{className:M.a.MealsLoading,children:Object(f.jsx)("p",{children:"Loading"})});if(u)return Object(f.jsx)("section",{className:M.a.MealsError,children:Object(f.jsx)("p",{children:u})});var j=n.map((function(e){return Object(f.jsx)(T,{id:e.id,title:e.title,description:e.description,price:e.price},e.id)}));return Object(f.jsx)("section",{className:M.a.meals,children:Object(f.jsx)(B,{children:Object(f.jsx)("ul",{children:j})})})},R=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(S,{}),Object(f.jsx)(L,{})]})},J=n(4),z=n.n(J),K=n(14),Q=n.n(K),Y=function(e){var t=Object(r.b)();return Object(f.jsx)("div",{className:Q.a.backdrop,onClick:function(){t(l.setCartIsShown(!1))}})},Z=function(e){return Object(f.jsx)("div",{className:Q.a.modal,children:Object(f.jsx)("div",{className:Q.a.content,children:e.children})})},G=document.getElementById("overlays"),U=function(e){return Object(f.jsxs)(f.Fragment,{children:[c.a.createPortal(Object(f.jsx)(Y,{}),G),c.a.createPortal(Object(f.jsx)(Z,{children:e.children}),G)]})},W=n(11),X=n.n(W),q=function(e){return Object(f.jsxs)("li",{className:X.a["cart-item"],children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:e.title}),Object(f.jsx)("div",{className:X.a.summary,children:Object(f.jsx)("span",{className:X.a.price,children:e.price})})]}),Object(f.jsx)("div",{className:X.a.actions,children:Object(f.jsx)("button",{onClick:e.onRemove,children:"\u2212"})})]})},V=n(5),$=n.n(V),ee=function(e){return""===e.trim()},te=function(e){var t=Object(r.b)(),n=Object(m.useState)({name:!0,email:!0}),a=Object(h.a)(n,2),c=a[0],i=a[1],s=Object(m.useRef)(),o=Object(m.useRef)(),u="".concat($.a.control," ").concat(c.name?"":$.a.invalid),d="".concat($.a.control," ").concat(c.email?"":$.a.invalid);return Object(f.jsxs)("form",{className:$.a.form,onSubmit:function(t){t.preventDefault();var n=s.current.value,a=o.current.value,c=!ee(n),r=!ee(a);i({name:c,email:r}),c&&r&&e.onConfirm({name:n,street:a})},children:[Object(f.jsxs)("div",{className:u,children:[Object(f.jsx)("label",{htmlFor:"name",children:"Your Name"}),Object(f.jsx)("input",{type:"text",id:"name",ref:s}),!c.name&&Object(f.jsx)("p",{children:"Please enter a valid name!"})]}),Object(f.jsxs)("div",{className:d,children:[Object(f.jsx)("label",{htmlFor:"street",children:"Email"}),Object(f.jsx)("input",{type:"text",id:"street",ref:o}),!c.email&&Object(f.jsx)("p",{children:"Please enter a valid email!"})]}),Object(f.jsxs)("div",{className:$.a.actions,children:[Object(f.jsx)("button",{type:"button",onClick:function(){t(l.setCartIsShown(!1))},children:"Cancel"}),Object(f.jsx)("button",{className:$.a.submit,children:"Confirm"})]})]})},ne=function(){var e=Object(m.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(m.useState)(!1),i=Object(h.a)(c,2),s=i[0],o=i[1],u=Object(m.useState)(!1),d=Object(h.a)(u,2),b=d[0],O=d[1],_=Object(r.b)(),p=Object(r.c)((function(e){return e.cart.items})),x=Object(r.c)((function(e){return e.cart.totalAmount})),v=function(){_(l.setCartIsShown(!1))},C=p.length>0,g=function(e){_(j.removeItemFromCart(e))},N=function(){var e=Object(A.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,fetch("https://chinesedrama-cae77-default-rtdb.asia-southeast1.firebasedatabase.app/orders.json",{method:"POST",body:JSON.stringify({user:t,orderedItems:p})});case 3:o(!1),O(!0),_(j.clearCart());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(f.jsx)("ul",{className:z.a["cart-items"],children:p.map((function(e){return Object(f.jsx)(q,{title:e.title,price:e.price,onRemove:g.bind(null,e.id)},e.id)}))}),I=Object(f.jsxs)("div",{className:z.a.actions,children:[Object(f.jsx)("button",{className:z.a["button--alt"],onClick:v,children:"Close"}),C&&Object(f.jsx)("button",{className:z.a.button,onClick:function(){a(!0)},children:"Order"})]}),S=Object(f.jsxs)(f.Fragment,{children:[w,Object(f.jsxs)("div",{className:z.a.total,children:[Object(f.jsx)("span",{children:"Total Amount"}),Object(f.jsx)("span",{children:x})]}),n&&Object(f.jsx)(te,{onConfirm:N}),!n&&I]}),k=Object(f.jsx)("p",{children:"Sending order data.."}),D=Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Successfully sent the order!"}),Object(f.jsx)("div",{className:z.a.actions,children:Object(f.jsx)("button",{className:z.a.button,onClick:v,children:"Close"})})]});return Object(f.jsxs)(U,{children:[!s&&!b&&S,s&&k,!s&&b&&D]})};var ae=function(){var e=Object(r.c)((function(e){return e.ui.cartIsShown}));return Object(f.jsxs)(f.Fragment,{children:[e&&Object(f.jsx)(ne,{}),Object(f.jsx)(N,{}),Object(f.jsx)("main",{children:Object(f.jsx)(R,{})})]})};c.a.render(Object(f.jsx)(r.a,{store:b,children:Object(f.jsx)(ae,{})}),document.getElementById("root"))}],[[34,1,2]]]);
//# sourceMappingURL=main.b982bb4e.chunk.js.map