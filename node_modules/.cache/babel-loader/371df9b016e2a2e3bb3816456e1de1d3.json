{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zhiyang/Documents/Portfolio/React-The Complete Guide/food-order/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/zhiyang/Documents/Portfolio/React-The Complete Guide/food-order/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/zhiyang/Documents/Portfolio/React-The Complete Guide/food-order/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import classes from\"./AvailableDramas.module.css\";import Card from\"../UI/Card\";import DramaItem from\"./DramaItem/DramaItem\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var AvailableDramas=function AvailableDramas(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dramas=_useState2[0],setDramas=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),httpError=_useState6[0],setHttpError=_useState6[1];useEffect(function(){var fetchMeals=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,responseData,loadedDramas,key;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://chinesedrama-cae77-default-rtdb.asia-southeast1.firebasedatabase.app/dramas.json\");case 2:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error(\"Something went wrong\");case 5:_context.next=7;return response.json();case 7:responseData=_context.sent;loadedDramas=[];for(key in responseData){loadedDramas.push({id:key,title:responseData[key].title,description:responseData[key].description,price:responseData[key].price.toFixed(2)});}setDramas(loadedDramas);setIsLoading(false);case 12:case\"end\":return _context.stop();}}},_callee);}));return function fetchMeals(){return _ref.apply(this,arguments);};}();fetchMeals().catch(function(error){setIsLoading(false);setHttpError(error.message);});},[]);if(isLoading){return/*#__PURE__*/_jsx(\"section\",{className:classes.MealsLoading,children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading\"})});}if(httpError){return/*#__PURE__*/_jsx(\"section\",{className:classes.MealsError,children:/*#__PURE__*/_jsx(\"p\",{children:httpError})});}var dramasList=dramas.map(function(drama){return/*#__PURE__*/_jsx(DramaItem,{id:drama.id,title:drama.title,description:drama.description,price:drama.price},drama.id);});return/*#__PURE__*/_jsx(\"section\",{className:classes.meals,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(\"ul\",{children:dramasList})})});};export default AvailableDramas;","map":{"version":3,"sources":["/Users/zhiyang/Documents/Portfolio/React-The Complete Guide/food-order/src/component/Dramas/AvailableDramas.js"],"names":["classes","Card","DramaItem","useEffect","useState","AvailableDramas","dramas","setDramas","isLoading","setIsLoading","httpError","setHttpError","fetchMeals","fetch","response","ok","Error","json","responseData","loadedDramas","key","push","id","title","description","price","toFixed","catch","error","message","MealsLoading","MealsError","dramasList","map","drama","meals"],"mappings":"ojBAAA,MAAOA,CAAAA,OAAP,KAAoB,8BAApB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,uBAAtB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,C,2CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC7B,cAA4BD,QAAQ,CAAC,EAAD,CAApC,wCAAOE,MAAP,eAAeC,SAAf,eACA,eAAkCH,QAAQ,CAAC,IAAD,CAA1C,yCAAOI,SAAP,eAAkBC,YAAlB,eACA,eAAkCL,QAAQ,CAAC,IAAD,CAA1C,yCAAOM,SAAP,eAAkBC,YAAlB,eACAR,SAAS,CAAC,UAAM,CACf,GAAMS,CAAAA,UAAU,0FAAG,oMACKC,CAAAA,KAAK,CAC3B,0FAD2B,CADV,QACZC,QADY,kBAIbA,QAAQ,CAACC,EAJI,8BAKX,IAAIC,CAAAA,KAAJ,CAAU,sBAAV,CALW,8BAOSF,CAAAA,QAAQ,CAACG,IAAT,EAPT,QAOZC,YAPY,eAQZC,YARY,CAQG,EARH,CASlB,IAAWC,GAAX,GAAkBF,CAAAA,YAAlB,CAAgC,CAC/BC,YAAY,CAACE,IAAb,CAAkB,CACjBC,EAAE,CAAEF,GADa,CAEjBG,KAAK,CAAEL,YAAY,CAACE,GAAD,CAAZ,CAAkBG,KAFR,CAGjBC,WAAW,CAAEN,YAAY,CAACE,GAAD,CAAZ,CAAkBI,WAHd,CAIjBC,KAAK,CAAEP,YAAY,CAACE,GAAD,CAAZ,CAAkBK,KAAlB,CAAwBC,OAAxB,CAAgC,CAAhC,CAJU,CAAlB,EAMA,CACDnB,SAAS,CAACY,YAAD,CAAT,CACAV,YAAY,CAAC,KAAD,CAAZ,CAlBkB,uDAAH,kBAAVG,CAAAA,UAAU,0CAAhB,CAoBAA,UAAU,GAAGe,KAAb,CAAmB,SAACC,KAAD,CAAW,CAC7BnB,YAAY,CAAC,KAAD,CAAZ,CACAE,YAAY,CAACiB,KAAK,CAACC,OAAP,CAAZ,CACA,CAHD,EAIA,CAzBQ,CAyBN,EAzBM,CAAT,CA0BA,GAAIrB,SAAJ,CAAe,CACd,mBACC,gBAAS,SAAS,CAAER,OAAO,CAAC8B,YAA5B,uBACC,8BADD,EADD,CAKA,CAED,GAAIpB,SAAJ,CAAe,CACd,mBACC,gBAAS,SAAS,CAAEV,OAAO,CAAC+B,UAA5B,uBACC,mBAAIrB,SAAJ,EADD,EADD,CAKA,CACD,GAAMsB,CAAAA,UAAU,CAAG1B,MAAM,CAAC2B,GAAP,CAAW,SAACC,KAAD,qBAC7B,KAAC,SAAD,EAEC,EAAE,CAAEA,KAAK,CAACZ,EAFX,CAGC,KAAK,CAAEY,KAAK,CAACX,KAHd,CAIC,WAAW,CAAEW,KAAK,CAACV,WAJpB,CAKC,KAAK,CAAEU,KAAK,CAACT,KALd,EACMS,KAAK,CAACZ,EADZ,CAD6B,EAAX,CAAnB,CASA,mBACC,gBAAS,SAAS,CAAEtB,OAAO,CAACmC,KAA5B,uBACC,KAAC,IAAD,wBACC,oBAAKH,UAAL,EADD,EADD,EADD,CAOA,CA7DD,CA+DA,cAAe3B,CAAAA,eAAf","sourcesContent":["import classes from \"./AvailableDramas.module.css\";\n\nimport Card from \"../UI/Card\";\nimport DramaItem from \"./DramaItem/DramaItem\";\nimport { useEffect, useState } from \"react\";\n\nconst AvailableDramas = () => {\n\tconst [dramas, setDramas] = useState([]);\n\tconst [isLoading, setIsLoading] = useState(true);\n\tconst [httpError, setHttpError] = useState(null);\n\tuseEffect(() => {\n\t\tconst fetchMeals = async () => {\n\t\t\tconst response = await fetch(\n\t\t\t\t\"https://chinesedrama-cae77-default-rtdb.asia-southeast1.firebasedatabase.app/dramas.json\"\n\t\t\t);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(\"Something went wrong\");\n\t\t\t}\n\t\t\tconst responseData = await response.json();\n\t\t\tconst loadedDramas = [];\n\t\t\tfor (const key in responseData) {\n\t\t\t\tloadedDramas.push({\n\t\t\t\t\tid: key,\n\t\t\t\t\ttitle: responseData[key].title,\n\t\t\t\t\tdescription: responseData[key].description,\n\t\t\t\t\tprice: responseData[key].price.toFixed(2),\n\t\t\t\t});\n\t\t\t}\n\t\t\tsetDramas(loadedDramas);\n\t\t\tsetIsLoading(false);\n\t\t};\n\t\tfetchMeals().catch((error) => {\n\t\t\tsetIsLoading(false);\n\t\t\tsetHttpError(error.message);\n\t\t});\n\t}, []);\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<section className={classes.MealsLoading}>\n\t\t\t\t<p>Loading</p>\n\t\t\t</section>\n\t\t);\n\t}\n\n\tif (httpError) {\n\t\treturn (\n\t\t\t<section className={classes.MealsError}>\n\t\t\t\t<p>{httpError}</p>\n\t\t\t</section>\n\t\t);\n\t}\n\tconst dramasList = dramas.map((drama) => (\n\t\t<DramaItem\n\t\t\tkey={drama.id}\n\t\t\tid={drama.id}\n\t\t\ttitle={drama.title}\n\t\t\tdescription={drama.description}\n\t\t\tprice={drama.price}\n\t\t/>\n\t));\n\treturn (\n\t\t<section className={classes.meals}>\n\t\t\t<Card>\n\t\t\t\t<ul>{dramasList}</ul>\n\t\t\t</Card>\n\t\t</section>\n\t);\n};\n\nexport default AvailableDramas;\n"]},"metadata":{},"sourceType":"module"}