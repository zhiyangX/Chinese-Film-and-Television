{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zhiyang/Documents/Portfolio/React-The Complete Guide/food-order/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/zhiyang/Documents/Portfolio/React-The Complete Guide/food-order/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/zhiyang/Documents/Portfolio/React-The Complete Guide/food-order/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import classes from\"./Cart.module.css\";import{useState}from\"react\";import{useDispatch}from\"react-redux\";import{uiActions}from\"../../store/ui-slice\";import{cartActions}from\"../../store/cart-slice\";import{useSelector}from\"react-redux\";import Modal from\"../UI/Modal\";import CartItem from\"./CartItem\";import Checkout from\"./Checkout\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Cart=function Cart(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCheckout=_useState2[0],setIsCheckout=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitting=_useState4[0],setIsSubmitting=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),didSubmit=_useState6[0],setDidSubmit=_useState6[1];var dispatch=useDispatch();var items=useSelector(function(state){return state.cart.items;});var totalAmount=useSelector(function(state){return state.cart.totalAmount;});var hideCartHandler=function hideCartHandler(){dispatch(uiActions.setCartIsShown(false));};var hasItems=items.length>0;var cartItemRemoveHandler=function cartItemRemoveHandler(id){dispatch(cartActions.removeItemFromCart(id));};var orderHandler=function orderHandler(){setIsCheckout(true);};var submitOrderHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userData){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsSubmitting(true);_context.next=3;return fetch(\"https://chinesedrama-cae77-default-rtdb.asia-southeast1.firebasedatabase.app/orders.json\",{method:\"POST\",body:JSON.stringify({user:userData,orderedItems:items})});case 3:setIsSubmitting(false);setDidSubmit(true);dispatch(cartActions.clearCart());case 6:case\"end\":return _context.stop();}}},_callee);}));return function submitOrderHandler(_x){return _ref.apply(this,arguments);};}();var cartItems=/*#__PURE__*/_jsx(\"ul\",{className:classes[\"cart-items\"],children:items.map(function(item){return/*#__PURE__*/_jsx(CartItem,{title:item.title,price:item.price// .bind(null, item.id) ensures that the id of the to be added or removed item is passed here to RemoveHandler\n// bind pre-configure the argument that function will receive when it's being executed\n// so we ensure these two function do receive the id or the item respectively\n,onRemove:cartItemRemoveHandler.bind(null,item.id)// bind explanation: https://www.javascripttutorial.net/javascript-bind/\n},item.id);})});var modalActions=/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(\"button\",{className:classes[\"button--alt\"],onClick:hideCartHandler,children:\"Close\"}),hasItems&&/*#__PURE__*/_jsx(\"button\",{className:classes.button,onClick:orderHandler,children:\"Order\"})]});var cartModalContent=/*#__PURE__*/_jsxs(_Fragment,{children:[cartItems,/*#__PURE__*/_jsxs(\"div\",{className:classes.total,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"span\",{children:totalAmount})]}),isCheckout&&/*#__PURE__*/_jsx(Checkout,{onConfirm:submitOrderHandler}),!isCheckout&&modalActions]});var isSubmittingModalContent=/*#__PURE__*/_jsx(\"p\",{children:\"Sending order data..\"});var didSubmitModalContent=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Successfully sent the order!\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{className:classes.button,onClick:hideCartHandler,children:\"Close\"})})]});return/*#__PURE__*/_jsxs(Modal,{children:[!isSubmitting&&!didSubmit&&cartModalContent,isSubmitting&&isSubmittingModalContent,!isSubmitting&&didSubmit&&didSubmitModalContent]});};export default Cart;","map":{"version":3,"sources":["/Users/zhiyang/Documents/Portfolio/React-The Complete Guide/food-order/src/component/Cart/Cart.js"],"names":["classes","useState","useDispatch","uiActions","cartActions","useSelector","Modal","CartItem","Checkout","Cart","isCheckout","setIsCheckout","isSubmitting","setIsSubmitting","didSubmit","setDidSubmit","dispatch","items","state","cart","totalAmount","hideCartHandler","setCartIsShown","hasItems","length","cartItemRemoveHandler","id","removeItemFromCart","orderHandler","submitOrderHandler","userData","fetch","method","body","JSON","stringify","user","orderedItems","clearCart","cartItems","map","item","title","price","bind","modalActions","actions","button","cartModalContent","total","isSubmittingModalContent","didSubmitModalContent"],"mappings":"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","sourcesContent":["import classes from \"./Cart.module.css\";\n\nimport { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { uiActions } from \"../../store/ui-slice\";\nimport { cartActions } from \"../../store/cart-slice\";\nimport { useSelector } from \"react-redux\";\nimport Modal from \"../UI/Modal\";\nimport CartItem from \"./CartItem\";\nimport Checkout from \"./Checkout\";\n\nconst Cart = () => {\n\tconst [isCheckout, setIsCheckout] = useState(false);\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\tconst [didSubmit, setDidSubmit] = useState(false);\n\tconst dispatch = useDispatch();\n\tconst items = useSelector((state) => state.cart.items);\n\tconst totalAmount = useSelector((state) => state.cart.totalAmount);\n\tconst hideCartHandler = () => {\n\t\tdispatch(uiActions.setCartIsShown(false));\n\t};\n\tconst hasItems = items.length > 0;\n\n\tconst cartItemRemoveHandler = (id) => {\n\t\tdispatch(cartActions.removeItemFromCart(id));\n\t};\n\tconst orderHandler = () => {\n\t\tsetIsCheckout(true);\n\t};\n\tconst submitOrderHandler = async (userData) => {\n\t\tsetIsSubmitting(true);\n\t\tawait fetch(\n\t\t\t\"https://chinesedrama-cae77-default-rtdb.asia-southeast1.firebasedatabase.app/orders.json\",\n\t\t\t{\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: JSON.stringify({ user: userData, orderedItems: items }),\n\t\t\t}\n\t\t);\n\t\tsetIsSubmitting(false);\n\t\tsetDidSubmit(true);\n\t\tdispatch(cartActions.clearCart());\n\t};\n\n\tconst cartItems = (\n\t\t<ul className={classes[\"cart-items\"]}>\n\t\t\t{items.map((item) => (\n\t\t\t\t<CartItem\n\t\t\t\t\tkey={item.id}\n\t\t\t\t\ttitle={item.title}\n\t\t\t\t\tprice={item.price}\n\t\t\t\t\t// .bind(null, item.id) ensures that the id of the to be added or removed item is passed here to RemoveHandler\n\t\t\t\t\t// bind pre-configure the argument that function will receive when it's being executed\n\t\t\t\t\t// so we ensure these two function do receive the id or the item respectively\n\t\t\t\t\tonRemove={cartItemRemoveHandler.bind(null, item.id)}\n\t\t\t\t\t// bind explanation: https://www.javascripttutorial.net/javascript-bind/\n\t\t\t\t/>\n\t\t\t))}\n\t\t</ul>\n\t);\n\n\tconst modalActions = (\n\t\t<div className={classes.actions}>\n\t\t\t<button className={classes[\"button--alt\"]} onClick={hideCartHandler}>\n\t\t\t\tClose\n\t\t\t</button>\n\t\t\t{hasItems && (\n\t\t\t\t<button className={classes.button} onClick={orderHandler}>\n\t\t\t\t\tOrder\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</div>\n\t);\n\n\tconst cartModalContent = (\n\t\t<>\n\t\t\t{cartItems}\n\t\t\t<div className={classes.total}>\n\t\t\t\t<span>Total Amount</span>\n\t\t\t\t<span>{totalAmount}</span>\n\t\t\t</div>\n\t\t\t{isCheckout && <Checkout onConfirm={submitOrderHandler} />}\n\t\t\t{!isCheckout && modalActions}\n\t\t</>\n\t);\n\tconst isSubmittingModalContent = <p>Sending order data..</p>;\n\tconst didSubmitModalContent = (\n\t\t<>\n\t\t\t<p>Successfully sent the order!</p>\n\t\t\t<div className={classes.actions}>\n\t\t\t\t<button className={classes.button} onClick={hideCartHandler}>\n\t\t\t\t\tClose\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</>\n\t);\n\treturn (\n\t\t<Modal>\n\t\t\t{!isSubmitting && !didSubmit && cartModalContent}\n\t\t\t{isSubmitting && isSubmittingModalContent}\n\t\t\t{!isSubmitting && didSubmit && didSubmitModalContent}\n\t\t</Modal>\n\t);\n};\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}